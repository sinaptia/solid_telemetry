<% hosts = SolidTelemetry::Host.all %>

<%= form_with scope: :filter, url: metrics_path, method: :get, class: "mb-10" do |form| %>
  <% if hosts.count > 1 %>
    <%= form.collection_select :host_id, hosts, :id, :name, {selected: filter_param.dig(:filter, :host_id), include_blank: true}, class: "rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sky-600 sm:text-sm/6" %>
  <% end %>
  <%= form.datetime_field :start_at, value: filter_param.dig(:filter, :start_at), class: "rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sky-600 sm:text-sm/6" %>
  <%= form.datetime_field :end_at, value: filter_param.dig(:filter, :end_at), class: "rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-sky-600 sm:text-sm/6" %>
  <%= form.button t(".filter"), class: "px-3 py-2 text-sm font-semibold text-white rounded-md shadow-sm bg-sky-600 hover:bg-sky-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600" %>
  <div class="mt-2 text-sm">
    <%=t ".resolution", resolution: resolution.inspect %>
  </div>
<% end %>
